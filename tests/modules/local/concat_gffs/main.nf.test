nextflow_process {

    name "Test Process CONCAT_GFFS"
    script "modules/local/concat_gffs/main.nf"
    process "CONCAT_GFFS"

    test("Should run without failures") {

        when {
            params {
                // define parameters here. Example:
                // outdir = "tests/results"
            }
            process {
                """
                input[0] = file("${projectDir}/assets/ref/ref.MPXV.NC063383.v7.gff")
                input[1] = [ [ batch_id: "batch_1",  batch_tsv: file("${projectDir}/tests/modules/local/prep_submission/batch_1.tsv"), sample_id: "NY0006" ],
                               file("${projectDir}/assets/sample_fastas/mpox/NY0006.fasta"),
                               file("${projectDir}/tests/modules/local/concat_gffs/NY0006.fasta.out.gff"),
                               file("${projectDir}/tests/modules/local/concat_gffs/NY0006.liftoff-orig.gff")]
                """
            }
        }

        then {
            assert process.success
        }

    }

}
